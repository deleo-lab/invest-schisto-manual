[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "InVEST Schistosomiasis",
    "section": "",
    "text": "The goal of the Schistosomiasis plugin for the InVEST software is provide a tool to incorporate schistosomiasis risk into dam and water infrastructure development decisions. This work is based on the Walz et al.¬†2015 paper with additional contributions by Andy Chamberlain and Giulio De Leo from the De Leo Lab, and Lisa Mandle and Doug Denu from the Natural Capital Project."
  },
  {
    "objectID": "index.html#installing-invest",
    "href": "index.html#installing-invest",
    "title": "InVEST Schistosomiasis",
    "section": "Installing InVEST",
    "text": "Installing InVEST"
  },
  {
    "objectID": "index.html#installing-plugin",
    "href": "index.html#installing-plugin",
    "title": "InVEST Schistosomiasis",
    "section": "Installing plugin",
    "text": "Installing plugin"
  },
  {
    "objectID": "getting_started.html#installing-plugin",
    "href": "getting_started.html#installing-plugin",
    "title": "Getting Started",
    "section": "Installing plugin",
    "text": "Installing plugin"
  },
  {
    "objectID": "tutorials.html",
    "href": "tutorials.html",
    "title": "Tutorials",
    "section": "",
    "text": "Downloading InVEST and the Schistosomiasis Plugin\n\n\n\nInVEST\n\n\nQuickstart\n\n\n\nQuick-start Instructions\n\n\n\n\n\n\nNov 24, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUnderstanding the model inputs\n\n\n\nInVEST\n\n\nQuickstart\n\n\nParameters\n\n\n\nDetails on the model parameters and how the model works\n\n\n\n\n\n\nFeb 5, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRunning sample models\n\n\n\nInVEST\n\n\nQuickstart\n\n\n\nUse our sample data to run your first model\n\n\n\n\n\n\nFeb 4, 2025\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html",
    "href": "tutorials/01_invest-basics/index.html",
    "title": "Downloading InVEST and the Schistosomiasis Plugin",
    "section": "",
    "text": "The Schistosomiasis Tool is built on top of NatCap‚Äôs InVEST Workbench software. Before using the tool, you will have to download InVEST Workbench.\nWe‚Äôve created a custom version InVEST to support the custom functionality needed for the schistosomiasis model. When users download InVEST to run the schistosomiasis plugin, they will be using this custom version of InVEST. In the future this might not be necessary and users can use regular InVEST for the schisto plugin, but the following custom functionality makes it necessary at the moment.\n\n\n\nWindows users must confirm that the Microsoft Visual C++ Redistributable is installed. To check if you have the compiler installed you can:\n\nOpen Add or Remove Programs in Settings \\&gt; Apps \\&gt; Installed apps\nSearch for C++\nYou‚Äôll see something like Microsoft Visual 2015-2019 Redistributable...\nIf you don‚Äôt see anything like that you‚Äôll need to install the compiler\n\nTo install the compiler\n\nGo to this link\nDownload and install Visual Studio 2026 using the Community option.\nAlternatively you can just install Download and install the Microsoft Visual C++ Redistributable from this link. Both the x86 and x64 versions.\nOpen the .exe files and follow to installation prompts.\n\nDownload and install the InVEST workbench\n\nDownload custom version of InVEST file with win32 in the name.¬† \nOpen your downloads folder and open the .exe file\nA box Windows protexted your PC will open. Click More info and Run anyways\n\nFollow the installation prompts\n\n\n\n\n\n\n\nDownload and install the InVEST workbench\n\nDownload custom version of InVEST file with darwin in the name.\n\nOpen your downloads folder and open the .exe file\nOnce the file has downloaded, open it and click Agree when the license prompt appears.\n\nA window will appear telling you to drag InVEST to Applications. Drag the InVEST app to your Applications folder. \nIMPORTANT: Launch InVEST for the First Time. MacOS security will block the app on first launch. To allow it:\nOpen Applications\n\n\n\nRight-click the InVEST app \\(\\to\\) choose Open\n\nIn the popup, click Done (the app will not open yet)\n\nOpen Applications \\(\\to\\) System Settings \\(\\to\\) Privacy & Security\n\nScroll to the Security section and you should see: InVEST  Workbench was blocked to protect your Mac. Click Open Anyway.\n\nClick Open Anyway again on the pop up box.\n\nEnter your Mac username + password when prompted.\n\n\n\n\nThe InVEST Workbench will now start as usual. This approval is only needed the first time."
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#topic-1",
    "href": "tutorials/01_invest-basics/index.html#topic-1",
    "title": "InVEST basics",
    "section": "Topic 1",
    "text": "Topic 1\nDownloading InVEST"
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#topic-2",
    "href": "tutorials/01_invest-basics/index.html#topic-2",
    "title": "InVEST basics",
    "section": "Topic 2",
    "text": "Topic 2"
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#downloading-invest",
    "href": "tutorials/01_invest-basics/index.html#downloading-invest",
    "title": "Downloading InVEST and the Schistosomiasis Plugin",
    "section": "",
    "text": "The Schistosomiasis Tool is built on top of NatCap‚Äôs InVEST Workbench software. Before using the tool, you will have to download InVEST Workbench.\nWe‚Äôve created a custom version InVEST to support the custom functionality needed for the schistosomiasis model. When users download InVEST to run the schistosomiasis plugin, they will be using this custom version of InVEST. In the future this might not be necessary and users can use regular InVEST for the schisto plugin, but the following custom functionality makes it necessary at the moment.\n\n\n\nWindows users must confirm that the Microsoft Visual C++ Redistributable is installed. To check if you have the compiler installed you can:\n\nOpen Add or Remove Programs in Settings \\&gt; Apps \\&gt; Installed apps\nSearch for C++\nYou‚Äôll see something like Microsoft Visual 2015-2019 Redistributable...\nIf you don‚Äôt see anything like that you‚Äôll need to install the compiler\n\nTo install the compiler\n\nGo to this link\nDownload and install Visual Studio 2026 using the Community option.\nAlternatively you can just install Download and install the Microsoft Visual C++ Redistributable from this link. Both the x86 and x64 versions.\nOpen the .exe files and follow to installation prompts.\n\nDownload and install the InVEST workbench\n\nDownload custom version of InVEST file with win32 in the name.¬† \nOpen your downloads folder and open the .exe file\nA box Windows protexted your PC will open. Click More info and Run anyways\n\nFollow the installation prompts\n\n\n\n\n\n\n\nDownload and install the InVEST workbench\n\nDownload custom version of InVEST file with darwin in the name.\n\nOpen your downloads folder and open the .exe file\nOnce the file has downloaded, open it and click Agree when the license prompt appears.\n\nA window will appear telling you to drag InVEST to Applications. Drag the InVEST app to your Applications folder. \nIMPORTANT: Launch InVEST for the First Time. MacOS security will block the app on first launch. To allow it:\nOpen Applications\n\n\n\nRight-click the InVEST app \\(\\to\\) choose Open\n\nIn the popup, click Done (the app will not open yet)\n\nOpen Applications \\(\\to\\) System Settings \\(\\to\\) Privacy & Security\n\nScroll to the Security section and you should see: InVEST  Workbench was blocked to protect your Mac. Click Open Anyway.\n\nClick Open Anyway again on the pop up box.\n\nEnter your Mac username + password when prompted.\n\n\n\n\nThe InVEST Workbench will now start as usual. This approval is only needed the first time."
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#downloading-the-schistosomiasis-plug-in",
    "href": "tutorials/01_invest-basics/index.html#downloading-the-schistosomiasis-plug-in",
    "title": "Getting Started with the InVEST Schistosomiasis Tool",
    "section": "2. Downloading the Schistosomiasis Plug-in",
    "text": "2. Downloading the Schistosomiasis Plug-in\nOnce InVEST Workbench is succesfully downloaded, you will need to open it and add the Schistosomiasis Plug-in to use the Schistosomiasis Tool.\n\nOpen InVEST Workbench. In InVEST Workbench click the three line menu icon ‚Üí Manage Plugins ‚Üí Add Plugin.\n\n\n\nScreenshot showing where to manage plug-ins\n\n\nCopy and paste and insert the following for git URL: https://github.com/natcap/invest-schistosomiasis.git. Check the box to acknowledge the risks associated with installing the plugin. Leave everything else blank.Click ‚ÄòAdd‚Äô. This step will take several minutes. It is setting up an isolated python environment, downloading, and installing the schistosomiasis model. You only need to do this step once.\n\n\n\nScreenshot showing how to add plug-in\n\n\nTo check that the plug-in was successfully installed, go to XXX and open it."
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#downloading-sample-data",
    "href": "tutorials/01_invest-basics/index.html#downloading-sample-data",
    "title": "Getting Started with the InVEST Schistosomiasis Tool",
    "section": "Downloading sample data",
    "text": "Downloading sample data\nNow that InVEST Workbench and the Schistosomiasis Plug-in are installed, you will need sample data to run the model. We have provided sample data for CIV, Senegal, and Tanzania.\n\nZipped files containing the sample data can be downloaded from a Google Drive folder linked here\nFor each location, there are two files:\n\ninvest_schistosomiasis_[location]_datastack.tar.gz contain InVEST datastack archives (a zipped tarball containing all model inputs and parameters). The data in these files will populate the inputs for the Schistosomiasis Tool.\n[location]_inputs.zip contain all the inputs for each location, including the different AOI (Area of Interest - the geographic boundary defining the study region)\n\nDownload the two files for the location you are interested in running\nOnce files are downloaded, extract them (unzip them).\nWhen extracted, you should see a parameters.invest.json file\nDrag parameters.invest.json into the InVEST model window to auto-fill all inputs"
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#running-the-model-with-sample-data",
    "href": "tutorials/01_invest-basics/index.html#running-the-model-with-sample-data",
    "title": "Getting Started with the InVEST Schistosomiasis Tool",
    "section": "4. Running the model with sample data",
    "text": "4. Running the model with sample data\n\nOpen the Schistosomiasis model in Workbench.\nDrag parameters.invest.json into the UI.\nChoose an output folder.\nClick Run."
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#interpreting-results-with-sample-data",
    "href": "tutorials/01_invest-basics/index.html#interpreting-results-with-sample-data",
    "title": "Getting Started with the InVEST Schistosomiasis Tool",
    "section": "5. Interpreting results with sample data",
    "text": "5. Interpreting results with sample data"
  },
  {
    "objectID": "index.html#to-do",
    "href": "index.html#to-do",
    "title": "InVEST Schistosomiasis",
    "section": "To Do",
    "text": "To Do\n\n\nGetting started windows\nGetting started mac ‚Äì updates needed with dev version\n\nQuickstart using Senegal example\n\nDetailed explainations of the functions and input values based on the SenegalHabSuit collab Can directly add python script to this website\n\nUsing your own data example with GEE\n\nFuture GEE app so users input country, dates, seasons and obtain layers needed\n\nFuture Comparing water layers (eg flood, no flood)\n\nFuture Report generation of schisto risk"
  },
  {
    "objectID": "tutorials/01_invest-basics/index.html#installing-the-schistosomiasis-plug-in",
    "href": "tutorials/01_invest-basics/index.html#installing-the-schistosomiasis-plug-in",
    "title": "Downloading InVEST and the Schistosomiasis Plugin",
    "section": "Installing the Schistosomiasis Plug-in",
    "text": "Installing the Schistosomiasis Plug-in\nOnce InVEST Workbench is downloaded, you will need to open it and add the Schistosomiasis Plug-in to use the Schistosomiasis Tool.\n\nOpen InVEST Workbench. In InVEST Workbench click the three line menu icon \\(\\to\\) Manage Plugins \\(\\to\\) Add Plugin.\n\nCopy and paste the following for git URL: https://github.com/natcap/invest-schistosomiasis.git. Check the box to acknowledge the risks associated with installing the plugin. Leave everything else blank. Click Add. This step will take several minutes. It is setting up an isolated python environment, downloading, and installing the schistosomiasis model. You only need to do this step once.\n\nThe Schistosomiasis plugin is now available in the workbench.\n\nThe elements of the workbench are described in the InVEST documentation."
  },
  {
    "objectID": "tutorials/02_sample_data/index.html",
    "href": "tutorials/02_sample_data/index.html",
    "title": "Running sample models",
    "section": "",
    "text": "Now that InVEST Workbench and the Schistosomiasis Plug-in are installed, you will need sample data to run the model. We have provided sample data for Cote d‚ÄôIvoire (CIV), Senegal, and Tanzania.\nZipped files containing the sample data can be downloaded from a Google Drive folder linked here. currently need to ask for access!. For each location, there are two files:\n\ninvest_schistosomiasis\\_\\[location\\]\\_datastack.tar.gz contain InVEST datastack archives (a zipped tarball containing all model inputs and parameters). The data in these files will populate the inputs for the Schistosomiasis Tool.\n\n\\[location\\]\\_inputs.zip contain all the inputs for each location, including the different AOI (Area of Interest - the geographic boundary defining the study region)\n\n\n\n\nDownload the two files for the location you are interested in running from Google Drive currently need to ask for access!\nOnce files are downloaded, extract them (unzip them). Store them in a folder relevant to your project (e.g.¬†Invest_sample_data/Schistosomiasis/Senegal)\n\nOpen InVEST and then click Schistosomiasis to open the plugin.\n\nIn your file browser navigate to where you extracted the invest_schistosomiasis_senegal_datastack folder. In that folder there is a file parameters.invest.json.\nDrag parameters.invest.json into the InVEST model window to auto-fill all inputs. Alternatively you can open the file using Load parameters from file and navigating to parameters.invest.json stopped here because json needs updates"
  },
  {
    "objectID": "tutorials/02_sample_data/index.html#downloading-sample-data",
    "href": "tutorials/02_sample_data/index.html#downloading-sample-data",
    "title": "Running sample models",
    "section": "",
    "text": "Now that InVEST Workbench and the Schistosomiasis Plug-in are installed, you will need sample data to run the model. We have provided sample data for Cote d‚ÄôIvoire (CIV), Senegal, and Tanzania.\nZipped files containing the sample data can be downloaded from a Google Drive folder linked here. currently need to ask for access!. For each location, there are two files:\n\ninvest_schistosomiasis\\_\\[location\\]\\_datastack.tar.gz contain InVEST datastack archives (a zipped tarball containing all model inputs and parameters). The data in these files will populate the inputs for the Schistosomiasis Tool.\n\n\\[location\\]\\_inputs.zip contain all the inputs for each location, including the different AOI (Area of Interest - the geographic boundary defining the study region)\n\n\n\n\nDownload the two files for the location you are interested in running from Google Drive currently need to ask for access!\nOnce files are downloaded, extract them (unzip them). Store them in a folder relevant to your project (e.g.¬†Invest_sample_data/Schistosomiasis/Senegal)\n\nOpen InVEST and then click Schistosomiasis to open the plugin.\n\nIn your file browser navigate to where you extracted the invest_schistosomiasis_senegal_datastack folder. In that folder there is a file parameters.invest.json.\nDrag parameters.invest.json into the InVEST model window to auto-fill all inputs. Alternatively you can open the file using Load parameters from file and navigating to parameters.invest.json stopped here because json needs updates"
  },
  {
    "objectID": "tutorials/02_sample_data/index.html#running-the-model-with-sample-data",
    "href": "tutorials/02_sample_data/index.html#running-the-model-with-sample-data",
    "title": "Running sample models",
    "section": "Running the model with sample data",
    "text": "Running the model with sample data\n\nOpen the Schistosomiasis model in Workbench.\nDrag parameters.invest.json into the UI.\nChoose an output folder.\nClick Run."
  },
  {
    "objectID": "tutorials/02_sample_data/index.html#interpreting-results-with-sample-data",
    "href": "tutorials/02_sample_data/index.html#interpreting-results-with-sample-data",
    "title": "Running sample models",
    "section": "Interpreting results with sample data",
    "text": "Interpreting results with sample data"
  },
  {
    "objectID": "tutorials/03_model_parameters/index.html",
    "href": "tutorials/03_model_parameters/index.html",
    "title": "Understanding the model inputs",
    "section": "",
    "text": "The backbone of the InVEST Schistosomiasis tools is recreating the production functions presented in Waltz et al., 2015. The underlying mechanistic model create a habitat suitability index based off remotely sensed habitat variables in a users area of interest. The relationship between some of these parameters and the habitat suitablity can be changed by the user in the InVEST workbench, others the users can define.\nTo get started the inputs needs to be in a project folder. Details on how to build these inputs for yourself are in future tutorial link. For the purpose of this tutorial we are going to use the Senegal sample data available on Google Drive in senegal_inputs.zip. Download and unzip the file to your project folder. More details on how to download and unzip are provided in Running sample models. For this tutorial you don‚Äôt need the invest_schistosomiasis_senegal_datastack folder or to load the .json file as described in the other tutorial. We are going to specify the parameters ourselves and create our own .json run files."
  },
  {
    "objectID": "tutorials/03_model_parameters/index.html#background",
    "href": "tutorials/03_model_parameters/index.html#background",
    "title": "Understanding the model inputs",
    "section": "",
    "text": "The backbone of the InVEST Schistosomiasis tools is recreating the production functions presented in Waltz et al., 2015. The underlying mechanistic model create a habitat suitability index based off remotely sensed habitat variables in a users area of interest. The relationship between some of these parameters and the habitat suitablity can be changed by the user in the InVEST workbench, others the users can define.\nTo get started the inputs needs to be in a project folder. Details on how to build these inputs for yourself are in future tutorial link. For the purpose of this tutorial we are going to use the Senegal sample data available on Google Drive in senegal_inputs.zip. Download and unzip the file to your project folder. More details on how to download and unzip are provided in Running sample models. For this tutorial you don‚Äôt need the invest_schistosomiasis_senegal_datastack folder or to load the .json file as described in the other tutorial. We are going to specify the parameters ourselves and create our own .json run files."
  },
  {
    "objectID": "tutorials/03_model_parameters/index.html#workbench",
    "href": "tutorials/03_model_parameters/index.html#workbench",
    "title": "Understanding the model inputs",
    "section": "Workbench",
    "text": "Workbench\n\n\n\nScreenshot of workbench\n\n\nWhen first opened the Schistosomiasis plugin looks like this. Each of the red boxes require an input from the user. Short descriptions of these are provided by clicking the üõà icons. Details on how to fill the red boxes and the underlying functions are detailed below.\n\nWorkspace (directory)\nThe workspace is the folder where all the model‚Äôs output files will be written. If this folder does not exist, it will be created. If data already exists in the folder, it will be overwritten.\nClick the folder icon, then navigate to where you want the model to be saved. In the screenshot I am saving it to a folder called senegal_example_inputs. Click Select Folder and the box will now contain the path to that folder.\n\n\n\nFile Suffix (string, optional)\nOption to add a suffix to model outputs to help keep track of different run. I‚Äôm using today‚Äôs date as a sting YYYYMMDD (20260205) so the runs will be saved in order.\n\n\nArea Of Interest (vector)\nThe Area of Interest (AOI) is a polygon of the area where you want the predictions and have the input data. For this example the AOI is the Senegal River Basin and the shapefile was provided in the senegal_inputs folder downloaded from Google Drive.\nClick the folder icon, navigate the senegal_inputs/projected_sen_aoi.gpkg, and click Open. Use this same process to load all of the files described below.\nHere is what the AOI for the Senegal River Basin sample data looks like.\n\n\n\n\n\n\n\nMax decay distance (number) (m)\nThe maximum threat distance from water risk in meters The risk decays 1 \\(\\to\\) 0 from 1km from water to the input max distance to water value linearly. How far from water do you expect a population to be impacted?\nThe function for proximity to water was based on a combination of literature and expert opinion. Households near schistosome-containing water bodies tend to have higher schistosomiasis prevalence than those far away (Huang and Manderson 1992). This relationship has been studied in Kenya, Ghana and Brazil and summarized into four risk categories based on a residence‚Äôs proximity to freshwater: very high (&lt;100 m), high (101-500 m), low (501-1,000 m) and very low (1,001-2,000 m) (Ajakaye et al.¬†2017). Based on field experience, people living in the arid Senegal River Basin travel farther to water (personal communication with Giulio De Leo and Andy Chamberlin), so the risk categories at this site were scaled up to: total (&lt;1 km), linearly declining (1-15 km), and negligible (&gt;15 km). This categorization is supported by a study in Kenya which found no correlation between proximity and prevalence for schools within 1 km of water (Nagi et al.¬†2014).\nEssentially, in northern Senegal surface water is quite limited (Sahel Desert) so we expect people to travel quite far to access water points. Therefore, 5 km (5000m) is a reasonable estimate for maximum distance (max decay distance = 5000).\n\n\n\n\n\n\n\nWater Presence (raster)\nA raster indicating presence of water called senegal_inputs/projected_basin_water_mask_nodata_sen.tif in the sample data. The water mask data here is based on Andy add citation and shows water presence/absenece in 30x30 meter pixels. The water mask is potentially the most important part of the model as risk will be underestimated for an area if the water presence raster indicates there is no water, but in truth small water bodies are present. Notice in the plot the Senegal river, which runs along the Mauritania-Senegal boarder and Lac de Guiers are clearly shown.\nI can change this to be interactive so the user and zoom in and see small water pixels\n\n\nPopulation\n\nPopulation Raster (raster) (m)\nWhy is there an ‚Äúm‚Äù in this title?\nA raster representing the number of inhabitants per pixel called senegal_inputs/population_count_projected.tif. The population data in this tutorial is from Andy add citation and shows the population estimates in ~1km pixels from YEAR. The population estimates are used to estimate the convoluted/population at risk estimates. It‚Äôs a bit hard to see because most of Senegal has a low population density, but Saint Louis (coast directly left of AOI) has a much higher population estimate.\n\npbase +\n  geom_spatraster(data=popu)+\n  scale_fill_fermenter(na.value = \"transparent\")+\n  geom_spatvector(data=aoi, color=\"red\", fill=\"transparent\", lwd=1)+\n  geom_text(aes(x=(xmin(aoi)+7e4), y=ymin(aoi)+5e4, label=\"AOI\"), size=8)+\n  labs(fill=\"population\")\n\n\n\n\n\n\nUse Default Population Suitability (optional)\npopulation is misspelled!\nSlide bar with the option to Use the Default Population Suitability (slide right) or input your own function (slide left). The default option is a linear increase in risk to rural max and an s-curve decrease in risk from rural max to urbanization max.\n\n\n\n\n\nIf the default is used the next two options are Rural Population Max and Urbanization Population Max.¬† \n\nFor the tutorial use Rural Population Max = 1000 and Urbanization Population Max = 25000. These values are based on at what respective population density you expect risk to be highest (1; rural) and lowest (0; urban). Andy confirm this: We estimated these values based on our local knowledge of at what population density transmission is highest before WASH measure are implemented and our estimate at which population density people are not exposed to surface water around their homes (e.g.¬†city with piped water and plumbing).\n\n\nDon‚Äôt Use Default Population Suitability (optional)\nIf the default option is not used the function and parameters need to be provided.\n\n\nThe Suitability Function Type needs to be defined for both Rural and Urbanization using the drop down menus. Then for each function various parameters need to be defined.\n\n\n\n\n\n\n\n\nfunction\nrural\nurban\n\n\n\n\nLinear\nFour points indicating the start (Xa, Ya) and end (Xz, Yz) of the line where Xa=min population size, Ya=risk at Xa, and Xz=max rural population size with the respective max risk (Yz, typically 1)\nsame idea in reverse\n\n\nexponential\nYin = ‚Ä¶, Xmed=‚Ä¶, Decay_factor=‚Ä¶, Max_dist=‚Ä¶\n‚Ä¶\n\n\nscurve (sigmoidal)\nYin=‚Ä¶, Yfin=‚Ä¶, Xmed=‚Ä¶, Inv_slope=‚Ä¶\n‚Ä¶\n\n\ntrapezoid\neach is a point a=‚Ä¶, b=‚Ä¶, c=‚Ä¶, z=‚Ä¶, of the trapazoid\n‚Ä¶\n\n\ngaussian\nMean=‚Ä¶, Std=‚Ä¶, Lb =‚Ä¶, Ub =‚Ä¶\n‚Ä¶\n\n\n\nHere I completely don‚Äôt understand how the trapezoid would work / how two linear functions are different from a trapezoid\nhelpful to add some plots here explaining more?\n\n## linear\ndata.frame(h = c(0, 100),\n           y = c(0, 1),\n           lab = c(\"(Xa, Ya)\", \"(Xz, Yz)\")) %&gt;% \n  ggplot(aes(x=h, y=y)) +\n  geom_line(color=\"blue\") +\n  geom_point() +\n  geom_text(aes(label=lab), position = position_nudge(x=c(5, -5))) +\n  labs(x=bquote(\"Human population per \"(km^2)),\n       y=\"Relative transmission risk\",\n       title=\"Linear\") \n\n\n\n## exponential  \nYin &lt;- 100 #initial or intercept?\nXmed &lt;- NA #inflection point?\nDecay_factor &lt;- 0.05 \nMax_dist &lt;- 100\n\ndata.frame(h = seq(0, 100, by=1)) %&gt;% \n  mutate(y = Yin * exp(-Decay_factor * h)) %&gt;% \n  ggplot(aes(x=h, y=y)) +\n  geom_line(color=\"blue\") +\n  labs(x=bquote(\"Human population per \"(km^2, h)),\n       y=\"Relative transmission risk\",\n       title=\"Exponential\",\n       subtitle = bquote(Y==Yin%.%e^\"Decay_factor*h\"))\n\n\n\n## scurve\nYin &lt;- 100 #min?\nYfin &lt;- 0 #max?\nXmed &lt;- 50 #midpoint\nInv_slope &lt;- 10/(Yfin - Yin) #k?\n\ndata.frame(h= seq(0, 100, by=1)) %&gt;% \n  mutate(y = 1/(1 + exp(Inv_slope * (h - Xmed)))) %&gt;% \n  ggplot(aes(x=h, y=y)) +\n  geom_line(color=\"blue\") +\n  geom_vline(xintercept = Xmed, lty=2) +\n  geom_text(aes(x=Xmed+5, y=1, label=\"Xmed\"))+\n  labs(x=bquote(\"Human population per \"(km^2, h)),\n       y=\"Relative transmission risk\",\n       title=\"Scurve\",\n       subtitle = bquote(Y==1/{1 + e^{\"Inv_slope\" %.% (h - Xmed)}}*\" ; Inv_slope = 10/(Yfin-Yin)\"))\n\nWarning in geom_text(aes(x = Xmed + 5, y = 1, label = \"Xmed\")): All aesthetics have length 1, but the data has 101 rows.\n‚Ñπ Please consider using `annotate()` or provide this layer with data containing\n  a single row.\n\n\n\n\n## trapazoid\ndata.frame(x = c(0, 40, 60, 100),\n           y = c(0, 0.5, 1, 0.5),\n           lab = c(\"a\", \"b\", \"c\", \"z\")) %&gt;% \n  ggplot(aes(x=x, y=y)) +\n  geom_line(color=\"blue\") +\n  geom_point() +\n  geom_text(aes(label=lab), position = position_nudge(x=c(5, -5))) +\n  labs(x=bquote(\"Human population per \"(km^2)),\n       y=\"Relative transmission risk\",\n       title=\"Trapezoid\")\n\n\n\n## gaussian\nmy_mean &lt;- 50\nmy_sd &lt;- 20\nLb &lt;- 20 #lower bound?\nUb &lt;- 80\n\ndata.frame(h= seq(0, 100, by=1)) %&gt;% \n  arrange(h) %&gt;% \n  mutate(y = pnorm(h, mean=my_mean, sd=my_sd),\n         y = case_when(h &lt;= Lb ~ 0, \n                       h &gt;= Ub ~ 1,\n                       TRUE ~ y)) %&gt;% \n  ggplot(aes(x=h, y=y)) +\n  geom_line(color=\"blue\") +\n  geom_vline(xintercept = c(Lb, Ub), lty=2) +\n  geom_text(aes(x=Lb+2, y=1, label=\"Lb\"))+\n  geom_text(aes(x=Ub-2, y=0.2, label=\"Ub\"))+\n  labs(x=bquote(\"Human population per \"(km^2, h)),\n       y=\"Relative transmission risk\",\n       title=\"Gaussian\")\n\nWarning in geom_text(aes(x = Lb + 2, y = 1, label = \"Lb\")): All aesthetics have length 1, but the data has 101 rows.\n‚Ñπ Please consider using `annotate()` or provide this layer with data containing\n  a single row.\n\n\nWarning in geom_text(aes(x = Ub - 2, y = 0.2, label = \"Ub\")): All aesthetics have length 1, but the data has 101 rows.\n‚Ñπ Please consider using `annotate()` or provide this layer with data containing\n  a single row.\n\n\n\n\n\n\n\n\nCalculate Water Depth (optional)\nWater depth is calculated using the water presence raster input and water distance from shore as a proxy for depth.\nFor the tutorial we are going to Enable this (slide to right) then fill in the Water Depth Risk Weight (ratio: a decimal from 0-1) = 1. The weight this factor should have on overall risk.\nThe funtion for water depth uses the distance from shore as a proxy for depth. We may need to address why this function dips to y=0 at x=2000 but then rises to y=0.088 for values of x&gt;2000..\n\ndata.frame(shoredist = seq(0,3000, by=1)) %&gt;% \n  mutate(water_depth = case_when(shoredist&lt;=210 ~ -0.0043*shoredist+1,\n                                 shoredist&lt;=2000 ~ -0.000056*shoredist + 0.088,\n                                 TRUE ~0)) %&gt;% \n  ggplot(aes(x=shoredist, y=water_depth)) +\n  geom_line()+\n  labs(x=\"Horizontal shore distance (m)\",\n       y=\"Relative suitability\",\n       title=\"Relative risk of water depth by shore distance\")\n\n\n\n\n\n\nCalculate Water Temperature (optional)\nEnable and so that water temperature effects are calculated. Now rasters of the dry season (senegal_inputs/projected_habsuit_waterTemp_dry_2019_sen.tif) and wet season (senegal_inputs/projected_habsuit_waterTemp_wet_2019_sen.tif) temperature and weight these should have on overall risk (Snail Water Tempertarue [Dry/Wet] Risk Weight).\n\nDry/Wet Season Temperature Raster (raster)\nRasters of air temperature in ¬∞C during the dry and wet seasons. These are called senegal_inputs/projected_habsuit_waterTemp_dry_2019_sen.tif and senegal_inputs/projected_habsuit_waterTemp_wet_2019_sen.tif respectively.\n\nggplot() +\n  geom_spatraster(data=temp_dry_wet)+\n  scale_fill_fermenter(na.value = \"grey90\")+\n  facet_wrap(~lyr)+\n  labs(fill=\"Water temp\")\n\n&lt;SpatRaster&gt; resampled to 500490 cells.\n\n\n\n\nhist(temp_dry_wet)\n\nWarning: [hist] a sample of 0% of the cells was used (of which 99% was NA)\nWarning: [hist] a sample of 0% of the cells was used (of which 99% was NA)\n\n\n\n\n\nFor the Senegal 2019 data we chose to estimate water depth based on the minimum and maximum water extent (number of water pixels across the 37-year composite). We used monthly water extent from JRC Monthly Water History v1.3 for a composite of 37 years from 1984 to 2021 because it is both open-source and accurate. Based on this we determined the best month to represent each season:\n\nMay to represent the dry season. (Although March and April have lower precipitation, May has the lowest water extent. June is the first month with low but significant rainfall.)\n\nOctober to represent the wet season. (Although September has the highest precipitation, October has a slightly higher water extent.)\n\nTo avoid overestimation of water extent based on anomamlous years, the mask will include pixels that have had water in at least five of the past 37 years.\n\n\nSnail Water Temp Dry & Wet Risk\nA ratio [0,1] of the temperature associated risk to snails in the dry and wet seasons.\nFor the tutorial set both of these to 1.\n\n\nSnail Suitabililty Function Types\nHere is where you choose the snail of interest and thus which species of Schistosoma the model is for. Remember Bulinus truncatus \\(\\to\\) S. haematobium and Biomphalaria \\(\\to\\) S. mansoni. The different snail genera have different thermal envelopes thus this will change the risk-temperature relationship. Alternatively, a function (linear, exponential, scurve, trapazoidal, gaussian) with the parameters decribed above can be used.\nAgain, set the Risk weight in the model for these parameters to 1.\nFor the tutorial chose Default: Bulinus truncatus and Default: S. haematobium.\nThe two snail temperature production functions in Waltz et al., 2015 are problematic because they do not have a maximum suitability of 1. Because we have an separate function for scalling down the impact of water temperature (Risk) we revised the function to not scale the effect twice. We based the revised temperature effects on the snail mortality reported in the original sources: Pfl√ºger 1980 for Bimophalaria and Pfl√ºger et al.¬†1984 for Bulinus.\nBiomphalaria temperature production function: \\[\n\\text{Value} = \\begin{cases}\n0 & \\text{if } Temp &lt; 16 \\\\\n-29.9111 + 5.015Temp + -0.3107Temp^2 +8.560e^{-03}Temp^3 + -8.769e^{-05}Temp^4 & \\text{if } 16 \\le Temp \\le 35 \\\\\n0 & \\text{if } Temp &gt; 35\n\\end{cases}\n\\]\n\ndata.frame(Temp=seq(10,40, by=1)) %&gt;% \n  mutate(y=case_when(Temp&lt;16 ~ 0,\n                     Temp&lt;=35 ~ -29.9111 + 5.015e+00 * Temp + -3.107e-01 * Temp^2 +8.560e-03 * Temp^3 + -8.769e-05 * Temp^4, \n                     TRUE ~ 0)) %&gt;% \n  ggplot(aes(x=Temp, y=y))+\n  geom_line()+\n  labs(title=\"Biomphalaria\",\n       x=\"Water surface temp C\",\n       y=\"Relative suitability\")\n\n\n\n\nBulinus temperature production function: \\[\n\\text{Value} = \\begin{cases}\n0 & \\text{if } Temp &lt; 17 \\\\\n-48.173 + 8.534 * Temp + -0.5568 * Temp^2 + 1.599e^{-02} * Temp^3 + -1.697e^{-04} * Temp^4 & \\text{if } 17 \\le Temp \\le 33 \\\\\n0 & \\text{if } Temp &gt; 33\n\\end{cases}\n\\]\n\ndata.frame(Temp=seq(10,40, by=1)) %&gt;% \n  mutate(y=case_when(Temp&lt;17 ~ 0,\n                     Temp&lt;=33 ~ -48.173 + 8.534e+00 * Temp + -5.568e-01 * Temp^2 + 1.599e-02 * Temp^3 + -1.697e-04 * Temp^4, \n                     TRUE ~ 0)) %&gt;% \n  ggplot(aes(x=Temp, y=y))+\n  geom_line()+\n  labs(title=\"Bulinus\",\n       x=\"Water surface temp C\",\n       y=\"Relative suitability\")\n\n\n\n\nS. mansoni temperature production function: \\[\n\\text{Value} = \\begin{cases}\n0 & \\text{if } Temp &lt; 16 \\\\\n-0.003 \\left(\\frac{268}{Temp - 14.2} - 335\\right) + 0.0336538 & \\text{if } 16 \\le Temp \\le 35 \\\\\n0 & \\text{if } Temp &gt; 35\n\\end{cases}\n\\]\n\ndata.frame(Temp=seq(10,40, by=1)) %&gt;% \n  mutate(y=case_when(Temp&lt;16 ~ 0,\n                     Temp&lt;=35 ~ -0.003 * (268/(Temp - 14.2) - 335) + 0.0336538, \n                     TRUE ~ 0)) %&gt;% \n  ggplot(aes(x=Temp, y=y))+\n  geom_line()+\n  labs(title=\"S. mansoni\",\n       x=\"Water surface temp C\",\n       y=\"Relative suitability\")\n\n\n\n\nS. haematobium temperature production function \\[\n\\text{Value} = \\begin{cases}\n0 & \\text{if } Temp &lt; 17 \\\\\n-0.006 \\left(\\frac{295}{Temp - 15.3} - 174\\right) + 0.056 & \\text{if } 17 \\le Temp \\le 33 \\\\\n0 & \\text{if } Temp &gt; 33\n\\end{cases}\n\\]\n\ndata.frame(Temp=seq(10,40, by=1)) %&gt;% \n  mutate(y=case_when(Temp&lt;17 ~ 0,\n                     Temp&lt;=33 ~ -0.006 * (295/(Temp - 15.3) - 174) + 0.056, \n                     TRUE ~ 0)) %&gt;% \n  ggplot(aes(x=Temp, y=y))+\n  geom_line()+\n  labs(title=\"S. haematobium\",\n       x=\"Water surface temp C\",\n       y=\"Relative suitability\")\n\n\n\n\n\n\n\nCalculate NDVI (optional)\nEnable and so that NDVI effects are calculated. Now rasters of the dry season (senegal_inputs/projected_habsuit_NDVI_dry_2019_sen.tif) and wet season (senegal_inputs/projected_habsuit_NDVI_wet_2019_sen.tif) NDVI and weight these should have on overall risk (Snail Water Tempertarue [Dry/Wet] Risk Weight).\n\nggplot() +\n  geom_spatraster(data=ndvi_dry_wet)+\n  scale_fill_fermenter(na.value = \"grey90\")+\n  facet_wrap(~lyr)+\n  labs(fill=\"NDVI\")\n\n&lt;SpatRaster&gt; resampled to 500490 cells.\n\n\n\n\nhist(ndvi_dry_wet)\n\nWarning: [hist] a sample of 0% of the cells was used (of which 99% was NA)\nWarning: [hist] a sample of 0% of the cells was used (of which 99% was NA)\n\n\n\n\n\n\nSuitability Function Type\nUse Default used in paper. Which looks like this.\n\ndata.frame(V = seq(-1,1, by=0.1)) %&gt;% \n  mutate(veg_coverage = case_when(V&lt;0 ~ 0,\n                                  V&lt;=0.3 ~ 3.33*V,\n                                  TRUE ~1)) %&gt;% \n  ggplot(aes(x=V, y=veg_coverage)) +\n  geom_line() +\n  labs(title = \"Vegetation coverage function\",\n            x=\"Normalized difference vegetation index (NDVI)\",\n            y=\"Relative suitability\")\n\n\n\n\nThe user can also specify custom functions using the same parameters as described above.\n\n\nNDVI Dry/Wet Risk Weight (ratio: a decimal from 0 -1)\nFor the tutorial use 1 for both.\n\n\n\nCalculate Water Velocity\nFor the tutorial Disable e.g., don‚Äôt slide this to the right.\nIf enabled the Default used in paper looks like this. Or the used can manually specify a function.\n\ndata.frame(river = seq(0,10,by=1)) %&gt;% \n  mutate(river_order = -(1/9)*river + (10/9)) %&gt;% \n  ggplot(aes(x=river, y=river_order))+\n  geom_line()+\n  labs(title=\"River order function\",\n       x=\"River order from HydroSheds\",\n       y=\"Relative suitability\")\n\n\n\n\n[Where does the stream order function fit in here?]{style: ‚Äúcolor: red;‚Äù}\n\ndata.frame(river = seq(0,7,by=1)) %&gt;% \n  mutate(river_order = 0.143*river) %&gt;% \n  ggplot(aes(x=river, y=river_order))+\n  geom_line()+\n  labs(title=\"Stream order function from (Walz et al 2015)\",\n       x=\"Stream order from ASTER GDEM\",\n       y=\"Relative suitability\")\n\n\n\n\nThe Risk Weight will also need to be specified.\nMethod for calculating the flow velocity in ‚Äúwater‚Äù: use the WWF Hydrosheds Free-Flowing Rivers Network in Google Earth Engine to determine the stream lines (flow velocity only). Do an operation to assign each raster pixel in the water mask the flow-velocity value of the nearest Hydrosheds pixel.\nMethod for calculating the flow velocity and stream order in ‚Äúpotential water‚Äù: use the WWF Hydrosheds Free-Flowing Rivers Network in Google Earth Engine to determine the stream lines (both flow velocity and stream order). Remove (set to N/A) the areas within the water mask.\nHydroSheds variables in Google Earth Engine are listed here.\nWalz et al.¬†2015 relied on Strahler Stream Order (see Beck-W√∂rner et al 2007), which is based on a numbering system from the headwaters to the mouth, and retrieved data from the topographic drainage lines derived from ASTER GDEM. However, we think it‚Äôs better to use HydroSheds River Order, which is based on average discharge.\nWe disable this function in the tutorial for Senegal because we think this function might hold true only in environments with hills and mountains, like Cote d‚ÄôIvoire, where it was developed. We‚Äôre not sure why headwaters would be less suitable than the river mouth in a flat environment like Western Senegal where the headwaters in Senegal might be suitable for snails [(e.g.¬†seepages in Mali).]{style: ‚Äúcolor: red;‚Äù}\n\ndata.frame(river = seq(0,10,by=1)) %&gt;% \n  mutate(river_order = -(1/9)*river + (10/9)) %&gt;% \n  ggplot(aes(x=river, y=river_order))+\n  geom_line()+\n  labs(title=\"River order function\",\n       x=\"River order from HydroSheds\",\n       y=\"Relative suitability\")\n\n\n\n\n[Where does the stream order function fit in here?]{style: ‚Äúcolor: red;‚Äù}\n\ndata.frame(river = seq(0,7,by=1)) %&gt;% \n  mutate(river_order = 0.143*river) %&gt;% \n  ggplot(aes(x=river, y=river_order))+\n  geom_line()+\n  labs(title=\"Stream order function from (Walz et al 2015)\",\n       x=\"Stream order from ASTER GDEM\",\n       y=\"Relative suitability\")\n\n\n\n\n\n\nAdditional User Defined Suitability Input. (optional)\nThese sections allow the user to define additional suitability functions.\nDisable for the tutorial."
  },
  {
    "objectID": "tutorials/03_model_parameters/index.html#run",
    "href": "tutorials/03_model_parameters/index.html#run",
    "title": "Understanding the model inputs",
    "section": "Run",
    "text": "Run\nNow you are ready to run the model by clicking the blue Run button (1). Which shows a blank screen for a bit (2) then starts showing lots of updates (3).¬† \nOnce that is done all of the results and input layers appear in the specified workspace. See them by either navigating to the folder in your file browser or using the shortcut provided by clicking Open Workspace (1) which will open the specified workspace folder in your file browser (2) \nWe will cover what all these files are in the [next tutorial]{style: ‚Äúcolor= red;‚Äù}.\n\nOptional save\nYou can also save the entire run, which will save a json file of the input paths which can be loaded as described in Tutorial_02. This is not necessary. You should be able to drag and drop that into the model. To do so click on ‚Äúsave as‚Äù in the left menu (1) and select Parameters only and Use relative paths (2) then click Save. This opens a new window where you can give the file a good name (4) and click Save. Back in the InVEST workbench you‚Äôll see a brief archeiving message.¬†\n\nThe run can then be loaded by (1) clicking load parameters from file, (2) click on the relevant .tzg folder with the name you gave it above, (4) click Open, (5) check you are in the folder above the folder with the files (in this case senegal_inputs) [only matters if you checked ‚Äúrelative paths‚Äù when you created the file], and (5) click Extract archeive here.\n\n\n\nscreenshots of loading saved run\n\n\nNow everything you previously input is loaded in the workspace."
  },
  {
    "objectID": "tutorials/03_model_parameters/index.html#just-the-tutorial-inputs-please",
    "href": "tutorials/03_model_parameters/index.html#just-the-tutorial-inputs-please",
    "title": "Understanding the model inputs",
    "section": "Just the tutorial inputs please!",
    "text": "Just the tutorial inputs please!\nEverything called a ‚Äúrisk weight‚Äù is how important (e.g., relative weight) that parameter is in the model.\n\n\n\n\n\n\n\n\nName\nDescription\nInput\n\n\n\n\nWorkspace\nfile where results are saved to\n‚Äúsenegal_example_inputs‚Äù\n\n\nFile Suffix\nif you want to save many interations of the model in the same folder add a suffix e.g.¬†the date)\n‚Äú20260205‚Äù\n\n\nArea of Interest\nshape file of the area you want to model\n‚Äúsenegal_inputs/projected_sen_aoi.gpkg‚Äù\n\n\nMax decay distance\nHow far from water (meters) are populations impacted\n‚Äú5000‚Äù\n\n\nWater Presence\nBinary raster of water features\n‚Äúsenegal_inputs/projected_basin_water_mask_nodata_sen.tif‚Äù\n\n\nPopulation Raster\nA raster representing the number of inhabitants per pixel\nsenegal_inputs/population_count_projected.tif\n\n\nDefault Population Suitability\nPopulation densities suitable to transmission\n‚Äúrural population max = 1000‚Äù ‚Äúurbanization population max = 25000‚Äù\n\n\nCalculate Water Depth\nFunction to estimate water depth based on dist. to shore\n‚ÄúEnable‚Äù ‚ÄúRisk weight = 1‚Äù\n\n\nCalculate Water Temperature\nFunction to estimate water temperature suitability\n‚ÄúEnable‚Äù\n\n\nDry Season Temperature Raster\nRaster of air temperature in the dry season\n‚Äúsenegal_inputs/projected_habsuit_waterTemp_dry_2019_sen.tif‚Äù\n\n\nWet Season Temperature Raster\nRaster of air temperature in the dry season\n‚Äúsenegal_inputs/projected_habsuit_waterTemp_wet_2019_sen.tif‚Äù\n\n\nSnail Water Temp Dry Risk Weight\n\n‚Äú1‚Äù\n\n\nSnail Water Temp Wet Risk Weight\n\n‚Äú1‚Äù\n\n\nSnail Suitability Function Type\nWhich snail species to model\n‚ÄúDefault: Bulinus truncatus‚Äù\n\n\nParasite Water Temp Dry Risk Weight\n\n‚Äú1‚Äù\n\n\nParasite Water Temp Wet Risk Weight\n\n‚Äú1‚Äù\n\n\nParasite Suitability Function Type\nWhich snail species to model\n‚ÄúDefault: S. haematobium‚Äù\n\n\nCalculate NDVI\nInclude NDVI in the model\n‚ÄúEnable‚Äù\n\n\nSuitability Function Type\ndefault or user specified relationship with risk and NDVI\n‚ÄúDefault used in paper‚Äù\n\n\nNDVI Dry Raster\nRaster of NDVI (0,1) during the dry season\n‚Äúsenegal_inputs/projected_habsuit_NDVI_dry_2019_sen.tif‚Äù\n\n\nNDVI Dry Risk Weight\n\n‚Äú1‚Äù\n\n\nNDVI Wet Raster\nRaster of NDVI (0,1) during the wet season\n‚Äúsenegal_inputs/projected_habsuit_NDVI_wet_2019_sen.tif‚Äù\n\n\nNDVI Wet Risk Weight\n\n‚Äú1‚Äù\n\n\nCalculate Water Velocity\nFunction to estimate water velocity suitability\n‚ÄúDisable‚Äù\n\n\nAdditional User Defined Suitabilty Input\nAllows user to add additional custom functions\n‚ÄúDisable‚Äù\n\n\n\nhttps://github.com/Bushytop/schisto_eeid/tree/main/data/natcap_invest https://colab.research.google.com/drive/1Gj8zyo4nE2ij10aNuoXjx3yiYCTGy5tR?usp=sharing#scrollTo=dylSqiUUwmA8 [7:52 AM]in particular, the parameters to use for consistency are: max decay distance: 5000 use default population suitability (enable) rural population max: 1000 urbanization population max: 25000 calculate water depth (enable) water depth risk weight: 1 calculate water temperature (enable) all risk weights set to 1 default snail and parasite suitability function types calculate ndvi (enable) default ndvi suitability function ndvi risk weight: 1 for both dry and wet water velocity disabled and no other functions defined"
  }
]